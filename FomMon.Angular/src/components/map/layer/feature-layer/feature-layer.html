  <app-map-layer-group
      [groupId]="groupId()"
      category="feature"
      [name]="layer().name"
      [order]="5"
      [thumbnailImg]="'assets/layer-preview-osm-base.png'"
      [initiallyVisible]="true"
      [interactivity]="{select: true, hover: true}"
  >
  <mgl-vector-source
          [id]="layer().kind"
          [tiles]="[url()]"
          [attribution]="layer().attribution"
          [promoteId]="layer().sourceIdColumn"
  >
    <!-- Polygon Fill layer -->
    @if (layer().geometryType === 'POLYGON') {
      <app-layer
              [id]="layer().tileSource"
              [groupId]="groupId()"
              type="fill"
              [source]="layer().kind"
              [sourceLayer]="layer().tileSource"
              [paint]="{
              'fill-color': [
                'case',
                ['boolean', ['feature-state', 'selected'], false], '#FFB347',
                ['boolean', ['feature-state', 'alert'], false], '#f54a00',
                layer().color
              ],
              'fill-opacity': [
                'case',
                ['boolean', ['feature-state', 'hide'], false], 0,
                ['boolean', ['feature-state', 'hover'], false], 0.7,
                0.5
              ]
            }"
      />

      <!-- Polygon outline layer -->
      <app-layer
          [groupId]="groupId()"
          [id]="layer().tileSource + '-outline'"
          type="line"
          [source]="layer().kind"
          [sourceLayer]="layer().tileSource"
          [paint]="{
          'line-color': [
            'case',
            ['boolean', ['feature-state', 'selected'], false], '#F58F00',
            ['boolean', ['feature-state', 'alert'], false], '#f54a00',
            layer().color
          ],
          'line-width': [
            'case',
            ['boolean', ['feature-state', 'selected'], false], 3,
            ['boolean', ['feature-state', 'hover'], false], 2,
            1
          ],
          'line-opacity': [
            'case',
            ['boolean', ['feature-state', 'hide'], false], 0,
            0.8
          ]
      }"
          [overrideInteractivity]="{select: false, hover: false}"

      />
    } @else if (layer().geometryType === 'LINESTRING') {

      <!-- Line layer -->
      <app-layer
        [groupId]="groupId()"
        [id]="layer().tileSource + '-line'"
        type="line"
        [source]="layer().kind"
        [sourceLayer]="layer().tileSource"
        [minzoom]="8"
        [paint]="{
      'line-color': [
          'case',
          ['boolean', ['feature-state', 'selected'], false], '#F58F00',
          ['boolean', ['feature-state', 'alert'], false], '#f54a00',
          layer().color
        ],
      'line-width': [
        'case',
        ['boolean', ['feature-state', 'selected'], false], 3,
        ['boolean', ['feature-state', 'hover'], false], 2,
        2
      ],
      'line-dasharray': [2, 0.5],
      'line-opacity': [
        'case',
        ['boolean', ['feature-state', 'hide'], false], 0,
        0.8
      ]

    }"


      ></app-layer>
    }
  </mgl-vector-source>

</app-map-layer-group>