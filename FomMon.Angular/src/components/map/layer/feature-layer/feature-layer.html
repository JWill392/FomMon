<mgl-vector-source
        [id]="layer().kind"
        [tiles]="[url()]"
        [attribution]="layer().attribution"
        [promoteId]="layer().sourceIdColumn"
>
  @let groupId=layer().kind;
  <app-map-layer-group
      [groupId]="groupId"
      category="feature"
      [name]="layer().name"
      [thumbnailImg]="'assets/layer-preview-osm-base.png'"
      [initiallyVisible]="true"
      [interactivity]="{select: true, hover: true}"
  />
  <!-- Polygon Fill layer -->
  @if (layer().geometryType === 'POLYGON') {
    @let idFill = layer().tileSource;
    <mgl-layer
            [id]="idFill"
            type="fill"
            [source]="layer().kind"
            [sourceLayer]="layer().tileSource"
            [paint]="{
            'fill-color': [
              'case',
              ['boolean', ['feature-state', 'selected'], false], '#FFB347',
              ['boolean', ['feature-state', 'alert'], false], '#f54a00',
              layer().color
            ],
            'fill-opacity': [
              'case',
              ['boolean', ['feature-state', 'hide'], false], 0,
              ['boolean', ['feature-state', 'hover'], false], 0.7,
              0.5
            ]
          }"
            [layout]="mapLayerService.getLayout(idFill)"
            appMapLayer
            [groupId]="groupId"
    ></mgl-layer>

    <!-- Polygon outline layer -->
    @let idOutline = layer().tileSource + '-outline';
    <mgl-layer
            [id]="idOutline"
            type="line"
            [source]="layer().kind"
            [sourceLayer]="layer().tileSource"
            [paint]="{
          'line-color': [
              'case',
              ['boolean', ['feature-state', 'selected'], false], '#F58F00',
              ['boolean', ['feature-state', 'alert'], false], '#f54a00',
              layer().color
            ],
          'line-width': [
            'case',
            ['boolean', ['feature-state', 'selected'], false], 3,
            ['boolean', ['feature-state', 'hover'], false], 2,
            1
          ],
          'line-opacity': [
            'case',
            ['boolean', ['feature-state', 'hide'], false], 0,
            0.8
          ]
        }"
            [layout]="mapLayerService.getLayout(idOutline)"
            appMapLayer
            [groupId]="groupId"
            [overrideInteractivity]="{select: false, hover: false}"
    ></mgl-layer>
  } @else if (layer().geometryType === 'LINESTRING') {

    <!-- Line layer -->
    @let idLine = layer().tileSource + '-line';
    <mgl-layer
            [id]="idLine"
            type="line"
            [source]="layer().kind"
            [sourceLayer]="layer().tileSource"
            [minzoom]="8"
            [paint]="{
          'line-color': [
              'case',
              ['boolean', ['feature-state', 'selected'], false], '#F58F00',
              ['boolean', ['feature-state', 'alert'], false], '#f54a00',
              layer().color
            ],
          'line-width': [
            'case',
            ['boolean', ['feature-state', 'selected'], false], 3,
            ['boolean', ['feature-state', 'hover'], false], 2,
            2
          ],
          'line-dasharray': [2, 0.5],
          'line-opacity': [
            'case',
            ['boolean', ['feature-state', 'hide'], false], 0,
            0.8
          ]

        }"
            [layout]="mapLayerService.getLayout(idLine)"
            appMapLayer
            [groupId]="groupId"
    ></mgl-layer>
  }

</mgl-vector-source>